# 如何在Polkadot上开始建立

Polkadot在[白皮书](https://github.com/w3f/polkadot-white-paper/raw/master/PolkaDotPaper.pdf)中被描述为完全可扩展和可扩容的区块链开发，部署和交互测试平台。开发者能够将这种令人兴奋的新技术用作其自身应用程序的基础架构。

本指南将引导你了解Polkadot目前的开发状况，解释平行链和智能合约之间的区别，逐步带你走过需要的步骤，从开始一个新项目建立平行链到成为Polkadot上的链或者从选择平台到支付部署建立智能合约。

## 我们处于哪里？

Polkadot已经实现了PoC-3的里程碑，并成功运行了Alexander 测试网络三个月。在下一个PoC-4版本中将逐步取得进展，其中包括跨链消息传递。开发进度有望在今年年底前推出主网。

与此同时，Polkadot是利用Substrate的runtime模块库来构建的，它也刚刚发布了第一个稳定版本。Substrate允许开发者重复使用许多用于创建Polkadot时的模块将它们组合成自己的链。通过编写定制链runtime的逻辑来自定义runtime模块也可以轻松扩展。

如果你是开发者、建设者、企业家或其他有远见的人，将Polkadot视为你下一个项目的生态系统，本指南将帮助你了解开发的选项，并确定哪种堆栈适合你和你的项目，并会向你介绍现在可开始计划和执行你想法的资源。

## 平行链与智能合约有什么区别?

在你开始实行你的想法之前，你需要了解在Polkadot上构建的两个开发选项之间的权衡：平行链或智能合约。

平行链是独立的链连接到Polkadot网络取得Polkadot中继链验证人上的共享安全。Polkadot本身正在使用相同的工具来开始创建平行链。平行链允许灵活性和对链逻辑的限制较少，但是带来一些额外的处理，这使得它与智能合约相比并不总是更好的选择。

智能合约是存在于特定链上的可执行程序，它们通常能与在同一链上的其他应用程序有良好的互操作性，但无法真正与另一个链上的某些程序进行交互。与构建完整平行链相比，智能合约使用较少的开发时间，但意味着对应用程序逻辑允许的内容有更多限制。它们是原型设计的良好测证，但由于可扩展性限制或复杂性过载，最终可能会超出负荷。

总结来说，如果你想控制网络的协议机制，那平行链对你来说是个不错的选择。

建立平行链意味着你可以从头开始设计货币体系的经济学，你可以在交易中实现定制费用结构，也可以通过DAO模式担当财政系统使用部份区块奖励允许利益相关者分配资金用途。

智能合约通常比平行链逻辑更简单，因此开发时间更短。他们将拥有像IDE这样的强大工具，让你可以更快地将想法带入世界。

在最近的DeFi应用中，可以看出智能合约可组合的一个例子，像Maker这样的项目开辟了进一步应用的道路，如去中心化的对冲基金和贷款管理系统。

创建一个仅用于将应用程序部署为智能合约的平行链会有更多的处理。这包括为你的平行链运行校对人节点，或以某种方式激励它们，以及抵押DOT或以其他方式说服Polkadot治理机制把你的链包含在平行链注册表中。

除非你完全确定你的项目需要是一个平行链或者你只是期待尝试新技术，否则建议你首先创建一个去中心化应用程序的MVP作为智能合约。

这是一个简单比较的表格，可帮助你理解两者分别：

| 平行链 | 智能合约 |
|-----------|----------------|
| 开发更复杂 (-) | 容易开发 (+) |
| 需要部署校对人节点 (-) | 容易部署 (+)  |
| 与平行链之间互动 (+) | 与应用之间互动 (+) |
| 需要维护网络 (-) | 更容易维护 (+) |
| 可以实现复杂的网络逻辑和进阶加密技术 (+) | 更难实现复杂的逻辑或加密技术 (-) |
| 擁有自己的网络(+) | 存在于别的网络上 (-) |



本指南现在分为两部分，具体取决于你对开发项目所做出的决定是平行链或智能合约。

想建立平行链 __TODO__

想建立智能合约 __TODO__


所以你想建立一个平行链

__TODO__

### Substrate 

Substrate是個创新者的框架，它提供了構建區塊鏈所需的基本構建工具，並提供了即插即用的runtime模組庫，鏈邏輯可從中組成。

建立它的动机是将新区块链的开发时间从几年缩短到几周/几天，简单的链甚至只需要几小时。


关于Substrate开发最明确的资源是Parity维护的[Substrate Development Hub](https://docs.substrate.dev)，它涵盖了从模板开始建立你的第一个平行链到建立Dapp链像迷恋猫。

建议您在那里逛一会儿，直到你熟悉了Substrate链的构建模式。一旦你有了扎实的理解，你就可以跟着[代币精选清单(TCR)](https://docs.substrate.dev/docs/building-a-token-curated-registry-dappchain-using-substrate)或[Substratekitties](https://shawntabrizi.github.io/substrate-collectables-workshop/)教程。


#### 开始一个新项目

您可能会想使用给Substrate开发者便利的脚本来启动新项目模板。

首先运行此指令下载脚本

```bash
curl https://getsubstrate.io -sSf | bash
```

然后运行以下指令创建项目：

```bash
substrate-node-new <myProject> <myName>
```

### 设定你的链

当你利用框架像Substrate建立好你的链逻辑后，你需要编译到Wasm blob，它包含了状态转变函数。这是你区块链的核心和Polkadot中继链上的验证人将验证所有状态转换，但是在能够提交你的链到Polkadot网络之前，还有几样事情你需要留意。
 
有二大事情当你完成开发你的链逻辑后，你需要解决：

你需要至少设定一个(Collator)校对人节点
你需要通过获取平行链注册表上的位置来确保你在中继链上的可用性

第一个需要的原因是因为中继链上的验证人需要某种方式来了解来自你的链的新状态转变，
这功能是由特别的节点称校对人。基本上校对人是处理你的链状态转变的节点和处理带有状态转换的证明交给验证人作验证。

你的链可以有一个或多个验证人。它们可以由开发者作为公开服务运行，或者可以在平行链中加入激励结构以鼓励社区运行它们。

#### Cumulus

[Cumulus](https://github.com/paritytech/cumulus)仍然处于开发阶段，还不适合在正式使用，它有意成为Substrate扩展使所有Substrate runtime将会兼容于Polkadot。

它会需要处理与Polkadot兼容的平行链的一些运作，这些包括：

 - 处理平行链之间的消息传递
 - 即装即用校对人节点
 - 带有嵌入式的轻客户端跟随中继链
 - 兼容Polkadot特定的区块作者复杂性

一旦Cumulus准备好了，将会是很容易开始使用：

 - 只需要对经已写好的Substrate链作出最小修改
 - Cumulus将毫不费力地将Substrate移植


观看最新Rob Habermeier分享Cumulus的演讲

[![img](http://img.youtube.com/vi/thgtXq5YMOo/0.jpg)](https://www.youtube.com/watch?v=thgtXq5YMOo)

#### 确保公平的验证人选择

在Polkadot中每个平行链的验证人是利用随机性从中继链自动选择。这些中继链上的验证人在每个时代将会从新被分配确保公平选择验证人和没有任何的验证人能继续验证特定的链。作为平行链开发者或操作员，一旦使你的兼容Polkadot和在平行链登记处获得了一个位置，你将会取得Polkadot安全性的功能。


### 如何使Polkadot包括你的平行链

一旦准备好将你的链整合到Polkadot中，第二个非常重要的步骤是确保拥有一个平行链注册位置。

在白皮书中，它指出只有通过治理机制进行全民投票的过程才能将链中加入到网络中。此外，该链将存在直到它再次被类似的机制投票，其中公民投票将给予用户从链上迁移的宽限期。

人们仍然相信治理机制将整合一些有用和带有好处的价值链以使Polkadot整个网络受益，但这不是你获得平行链位置的唯一方法。如果你不想说服治理机制你的链条是有用，那么还有另一种方法。

### 成为平行链的好处


成为Polkadot平行链的好处是你的鏈將會受到著整個Polkadot網絡的保護而不用維護自己的共識。除此之外，你的鏈透過跨鏈信息传递功能可以與其它Polkadot網絡內的平行鏈互相溝通。

为Polkadot和不同平行鏈而建立的工具和监控系統將會很容易把它轉過來或在將來的平行鏈重复使用。如果没有Polkadot，自主链将需要具有支持它的兼容钱包，反而利用Polkadot，經已有很多基本工具像錢包和區塊浏览器你可以使用和配置到你的平行鏈。

成为Polkadot平行鏈允许你和你的社區測試最新的区块链技术，无论你是对治理、可扩展性、隐私还是定制虚拟机感兴趣，Polkadot都足够支持你将會发布或未來的创新。

经已到了平行鏈最後的部分，你可以阅读有关智能合约的内容或可以直接前往到總結。

### 你想建立智能合约


部署智能合约

智能合约只是储存在链上地址的一些代码和可由外部参与者调用。关键部分是你必须先将代码放到链上才能开始执行它！

不管你将会使用任何特定的平行链，在链上部署你的智能合约会略有不同，但通常你会发送一个特殊交易，该交易将在帐本上创建智能合约。

为你的智能合约付费

每个平台会有不同支付的方法和维护你的智能合约状态。

您可能会看到支付智能合约的不同模式包括：


对Polkadot的智能合约来说，现在仍然还是很早而且开发才刚刚稳定下来。我们积极地提供内容去帮助开发者加快速度和维持wiki最新的资料。您还应该通过以下链接获取最新消息：


### Edgeware

Edgeware的计划了在Polkadot上运行平行链，它将会是个智能合约平台。随着有趣的治理和代币分配创新，它将会是第一个连接到在Polkadot主网上带有智能合约的平行链。你可以在它们的网站上了解其项目的最新信息。

### pDSL（Parity领域专用语言）
[pDSL](https://github.com/Robbepop/pdsl)有意成为用于编写Rust智能合约的新领域专用语言，把Rust编译成Wasm代码。如README中所述，它仍处于实验阶段，缺少了很多计画中的功能，但今天是有可能开始使用它来编写智能合约。

对于感兴趣的开发者，他们可以通过研究经已编写好的[例子](https://github.com/Robbepop/pdsl/tree/master/examples)，开始使用PDSL来编写智能合约。这些可以用来作为参考编写更加复杂的逻辑并将可以部署在智能合约链上，但是由于生态还早在早期，所以尝试用它来构建发布就绪的代码可能不是一个好主意。

## 部署你的应用程序作为智能合约

智能合约本质上是一些存在于链上地址并且可以执行的代码。


### 现在还是很早

Polkadot的智能合约还是很早，这解释了为什么这一部分由正在进行的项目和非特定资料组成。保持查看上述项目和留意测试网发布。另外，如果你有勇气，你可以尝试使用pDSL等工具，但要注意大部分技术仍然处于在非稳定版本，所以随着我们继续向着Polkadot主网进发，技术也可能会发生更改。



希望本指南能幫助你決定你的新項目作為一個平行鏈還是一個智能合約,並向你展示了現有 Polkadot 上開發的資源。儘管工具還沒成熟, 但提早了解也有好處: 你有能力通過創造真正新的東西來創新。

如果你想分享你對平行鏈或智能合约的想法，请随时在Polkadot Watercooler与我们交谈，如果你对开发有疑问，可以尝试在Polkadot Beginners Lounge询问。 保持留意我們的社交頻道! 
祝你好运，在Polkadot上把你的愿景变为现实


## 总结

希望本指南能帮助你决定你的新项目作为一个平行链还是一个智能合约，并且你展示了现有Polkadot上开发的资源。尽管工具还没成熟，但提早了解也有好处：你有能力通过创造真正新的东西来创新。

如果你想分享你对平行链或智能合约的想法，请随时在[Polkadot Watercooler](https://riot.im/app/#/room/#polkadot-watercooler:matrix.org)与我们交谈，如果你对开发有疑问，可以尝试在[Polkadot Beginners Lounge](https://riot.im/app/#/room/#polkadotnoobs:matrix.org)询问。保持留意我们的[社交频道](https://wiki.polkadot.network/en/latest/community/)！
祝你好运!! 把你的愿景在Polkadot上变为现实